# =============================================================================
# Supabase Postgres MCP Server - Environment Configuration
# =============================================================================
# Copy this file to .env and configure your values
# SECURITY: Never commit .env to version control!
# =============================================================================

# ===== Server Configuration =====
MCP_SERVER_NAME=supabase-postgres-mcp
MCP_PORT=8799
MCP_PATH=/mcp

# ===== Authentication =====
# REQUIRED: Set a strong, random token for authentication
# Generate with: openssl rand -base64 32
MCP_TOKEN=CHANGE_ME_TO_A_STRONG_RANDOM_TOKEN

# ===== Query Limits =====
# Maximum rows returned per query (default: 5000)
ROW_LIMIT=5000

# Query timeout in milliseconds (default: 15000 = 15 seconds)
QUERY_TIMEOUT_MS=15000

# Allow write operations (INSERT, UPDATE, DELETE, etc.)
# Set to 'true' only if you need write access - use with caution!
ALLOW_WRITE=false

# ===== Logging =====
# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Log format: json (for production) or simple (for development)
LOG_FORMAT=json

# =============================================================================
# Database Connections
# =============================================================================
# Define multiple named database connections using the pattern:
# CONN_<name>_HOST, CONN_<name>_PORT, CONN_<name>_DBNAME,
# CONN_<name>_USER, CONN_<name>_PASSWORD, CONN_<name>_SSLMODE
#
# The <name> can be anything (prod, staging, dev, office, home, etc.)
# =============================================================================

# ===== Connection 1: Production =====
CONN_prod_HOST=your-supabase-host.supabase.co
CONN_prod_PORT=5432
CONN_prod_DBNAME=postgres
CONN_prod_USER=mcp_readonly
CONN_prod_PASSWORD=your_secure_password_here
CONN_prod_SSLMODE=require

# ===== Connection 2: Staging =====
CONN_staging_HOST=your-staging-host.supabase.co
CONN_staging_PORT=5432
CONN_staging_DBNAME=postgres
CONN_staging_USER=mcp_readonly
CONN_staging_PASSWORD=your_secure_password_here
CONN_staging_SSLMODE=require

# ===== Connection 3: Development =====
CONN_dev_HOST=localhost
CONN_dev_PORT=54322
CONN_dev_DBNAME=postgres
CONN_dev_USER=postgres
CONN_dev_PASSWORD=postgres
CONN_dev_SSLMODE=prefer

# ===== Connection 4: Office Database (example) =====
# CONN_office_HOST=192.168.1.100
# CONN_office_PORT=5432
# CONN_office_DBNAME=company_db
# CONN_office_USER=mcp_readonly
# CONN_office_PASSWORD=secure_password
# CONN_office_SSLMODE=prefer

# ===== Connection 5: Home Database (example) =====
# CONN_home_HOST=192.168.0.50
# CONN_home_PORT=5432
# CONN_home_DBNAME=personal_db
# CONN_home_USER=mcp_readonly
# CONN_home_PASSWORD=secure_password
# CONN_home_SSLMODE=disable

# =============================================================================
# Notes on SSL Mode
# =============================================================================
# SSLMODE options:
# - disable: No SSL (use only for local development)
# - prefer: Try SSL, fall back to non-SSL
# - require: Require SSL (recommended for Supabase/production)
# - verify-ca: Require SSL and verify CA certificate
# - verify-full: Require SSL, verify CA and hostname
#
# For Supabase connections, use: require
# For local development, use: prefer or disable
# =============================================================================

# =============================================================================
# Security Best Practices
# =============================================================================
# 1. Use strong, unique passwords for each database user
# 2. Create dedicated read-only database roles (see setup-readonly-role.sql)
# 3. Never commit .env to version control (add to .gitignore)
# 4. Rotate MCP_TOKEN regularly
# 5. Use ALLOW_WRITE=false unless absolutely necessary
# 6. Enable SSL (SSLMODE=require) for production connections
# 7. Consider IP whitelisting at your database level
# =============================================================================
